from aiogram import types
from aiogram.dispatcher.filters import Text

from keyboards.inline.referal_keyboard import ref_kb
from loader import dp
from utils.db_api.db_commands import get_user


@dp.callback_query_handler(Text(equals='ref'))
async def show_ref(call: types.CallbackQuery):
    user = await get_user(call.from_user.id)
    keyboard = await ref_kb(call.from_user.id)
    await call.message.edit_text(f'''üôã‚Äç‚ôÇÔ∏è<b>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞?</b>

üí∏–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É:
–¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å —Å—Å—ã–ª–∫—É, –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—É—é –Ω–∏–∂–µ —Å–≤–æ–µ–º—É –¥—Ä—É–≥—É –∏ –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–µ—Ç –∫—É—Ä—Å,<b> —Ç–≤–æ–π –±–æ–Ω—É—Å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ 500 —Ä—É–±–ª–µ–π</b>,
–∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –º–æ–∂–µ—à—å –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –≤ –≤–∏–¥–µ —Å–∫–∏–¥–∫–∏ –Ω–∞ –æ–¥–∏–Ω –∏–∑ –∫—É—Ä—Å–æ–≤.
ü§Ø–¢–∞–∫ –∂–µ, <b>–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –¥—Ä—É–≥ –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç +30 –æ—á–∫–æ–≤ —Ä–µ–π—Ç–∏–Ω–≥–∞</b>, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ–∫–∞—á–∞—Ç—å —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å –±—ã—Å—Ç—Ä–µ–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö!

‚ÑπÔ∏è <b>–ü—Ä–∏–≤–µ–¥–µ–Ω–æ –¥—Ä—É–∑–µ–π:</b> {user.amount_ref}
<b>–ë–æ–Ω—É—Å–Ω—ã–π –±–∞–ª–∞–Ω—Å:</b> {user.balance_ref}

üëá–ß—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –±–æ—Ç–æ–º —Å –¥—Ä—É–≥–æ–º, –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ:''', reply_markup=keyboard)
